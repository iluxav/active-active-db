# Node 3 - Gossip Discovery Cluster
# Start with: ./target/release/a2db --config config/discovery-node3.toml

[server]
replication_listen_addr = "127.0.0.1:9021"
redis_listen_addr = "127.0.0.1:16381"

[identity]
replica_id = "node-3"

[replication]
peers = []
batch_interval_ms = 50
max_batch_size = 1000

[discovery]
enabled = true
seeds = [
    "http://127.0.0.1:9001",
    "http://127.0.0.1:9011",
    "http://127.0.0.1:9021",
]
advertise_addr = "http://127.0.0.1:9021"
gossip_interval_ms = 500
gossip_fanout = 2
heartbeat_interval_ms = 250
suspect_threshold = 3
suspect_timeout_ms = 2000
dead_timeout_ms = 10000
bootstrap_timeout_ms = 5000

[persistence]
enabled = true
data_dir = "./data/node3"
snapshot_interval_s = 5
snapshot_retain_count = 3
format = "bincode"

[expiration]
enabled = true
cleanup_interval_s = 1
cleanup_batch_size = 100
grace_period_s = 5

[metrics]
enabled = true
listen_addr = "127.0.0.1:9092"

[logging]
level = "info"
format = "pretty"
